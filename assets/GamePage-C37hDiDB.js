import{Q}from"./QTooltip-C7FQI7Xs.js";import{_ as ue,c as D,g as I,$ as de,a as r,h as x,a0 as me,i as fe,e as F,l as ve,b as z,J as O,r as N,a1 as ge,a2 as he,L as pe,w as L,x as ye,A as U,B as $,C as u,G as n,W as B,N as M,F as A,X as W,M as c,U as _e,S,T as G,I as T,H as q,O as be,P as Se,Z as xe,Q as w,V as Y,a3 as H,a4 as R,a5 as J,o as Ce,k as ke}from"./index-BGe7OyI9.js";import{b as $e,u as we,c as K,Q as We,G as qe,a as Be,W as Me,S as Ge}from"./SettingsPanel-iWm3n0Uy.js";import{Q as Pe}from"./QPage-DIwOQZLn.js";import{u as Z}from"./QList-BAw9E4Dh.js";import{u as Ve}from"./use-quasar-BT7GoY2C.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ae={...ue,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},E=50,te=2*E,oe=te*Math.PI,Qe=Math.round(oe*1e3)/1e3,ze=D({name:"QCircularProgress",props:{...Ae,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:s}){const{proxy:{$q:d}}=I(),f=de(e),p=r(()=>{const t=(d.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(d.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-t}deg)`:`rotate3d(0, 0, 1, ${t-90}deg)`}}),y=r(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),o=r(()=>te/(1-e.thickness/2)),v=r(()=>`${o.value/2} ${o.value/2} ${o.value} ${o.value}`),_=r(()=>$e(e.value,e.min,e.max)),C=r(()=>e.max-e.min),g=r(()=>e.thickness/2*o.value),a=r(()=>{const t=(e.max-_.value)/C.value,i=e.rounded===!0&&_.value<e.max&&t<.25?g.value/2*(1-t/.25):0;return oe*t+i});function l({thickness:t,offset:i,color:m,cls:k,rounded:P}){return x("circle",{class:"q-circular-progress__"+k+(m!==void 0?` text-${m}`:""),style:y.value,fill:"transparent",stroke:"currentColor","stroke-width":t,"stroke-dasharray":Qe,"stroke-dashoffset":i,"stroke-linecap":P,cx:o.value,cy:o.value,r:E})}return()=>{const t=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&t.push(x("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:E-g.value/2,cx:o.value,cy:o.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&t.push(l({cls:"track",thickness:g.value,offset:0,color:e.trackColor})),t.push(l({cls:"circle",thickness:g.value,offset:a.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const i=[x("svg",{class:"q-circular-progress__svg",style:p.value,viewBox:v.value,"aria-hidden":"true"},t)];return e.showValue===!0&&i.push(x("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},s.default!==void 0?s.default():[x("div",_.value)])),x("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:f.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:_.value},me(s.internal,i))}}}),Te={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function He(){const{props:e,proxy:{$q:s}}=I(),d=fe(ve,F);if(d===F)return console.error("QPageSticky needs to be child of QLayout"),F;const f=r(()=>{const a=e.position;return{top:a.indexOf("top")!==-1,right:a.indexOf("right")!==-1,bottom:a.indexOf("bottom")!==-1,left:a.indexOf("left")!==-1,vertical:a==="top"||a==="bottom",horizontal:a==="left"||a==="right"}}),p=r(()=>d.header.offset),y=r(()=>d.right.offset),o=r(()=>d.footer.offset),v=r(()=>d.left.offset),_=r(()=>{let a=0,l=0;const t=f.value,i=s.lang.rtl===!0?-1:1;t.top===!0&&p.value!==0?l=`${p.value}px`:t.bottom===!0&&o.value!==0&&(l=`${-o.value}px`),t.left===!0&&v.value!==0?a=`${i*v.value}px`:t.right===!0&&y.value!==0&&(a=`${-i*y.value}px`);const m={transform:`translate(${a}, ${l})`};return e.offset&&(m.margin=`${e.offset[1]}px ${e.offset[0]}px`),t.vertical===!0?(v.value!==0&&(m[s.lang.rtl===!0?"right":"left"]=`${v.value}px`),y.value!==0&&(m[s.lang.rtl===!0?"left":"right"]=`${y.value}px`)):t.horizontal===!0&&(p.value!==0&&(m.top=`${p.value}px`),o.value!==0&&(m.bottom=`${o.value}px`)),m}),C=r(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function g(a){const l=z(a.default);return x("div",{class:C.value,style:_.value},e.expand===!0?l:[x("div",l)])}return{$layout:d,getStickyContent:g}}const Ne=D({name:"QPageSticky",props:Te,setup(e,{slots:s}){const{getStickyContent:d}=He();return()=>d(s)}});function Fe(){const e=O(),s=Z(),d=N(0),f={timeBonus:(t,i)=>{const{timeSinceLastWord:m}=i;return m<2?t+100:m<5?t+50:m<10?t+25:t},comboBonus:(t,i)=>{const{timeSinceLastWord:m,combo:k}=i;return m<5?t*(1+k*.1):t},difficultyBonus:(t,i)=>t*({baby:.5,easy:1,medium:1.5,hard:2}[i.difficulty]||1),noHintsBonus:(t,i)=>i.hintsUsed?t:t+100,firstWinBonus:(t,i)=>i.isFirstWinToday?t*1.2:t},p=(t=100,i={})=>Object.values(f).reduce((m,k)=>Math.round(k(m,{timeSinceLastWord:i.timeSinceLastWord,combo:e.combo,difficulty:e.difficulty,hintsUsed:e.hintsEnabled,isFirstWinToday:i.isFirstWinToday,...i})),t),y=r(()=>e.totalAttempts===0?100:Math.round(e.foundWordsCount/e.totalAttempts*100)),o=r(()=>e.totalWords===0?0:Math.round(e.foundWordsCount/e.totalWords*100)),v=r(()=>e.score.toLocaleString()),_=r(()=>{const t=e.score,i=s.getHighScore(e.currentCategory,e.difficulty);return t>(i||0)}),C=r(()=>s.getHighScore(e.currentCategory,e.difficulty)||0),g=()=>{const t=[];return e.timer.seconds<60&&o.value===100&&t.push({type:"speed",title:"Speed Demon",description:"Complete a game in under 1 minute"}),y.value===100&&e.totalAttempts>5&&t.push({type:"accuracy",title:"Perfect Aim",description:"100% accuracy with more than 5 attempts"}),e.combo>=5&&t.push({type:"combo",title:"Combo Master",description:"Get a 5x combo"}),e.score>1e4&&t.push({type:"score",title:"High Roller",description:"Score over 10,000 points"}),t};return{accuracy:y,progress:o,formattedScore:v,isNewHighScore:_,previousHighScore:C,calculateScore:p,handleWordFound:()=>{const t=e.timer.seconds,i=t-d.value;d.value=t;const m=p(100,{timeSinceLastWord:i});if(e.addScore(m),i<5?e.combo++:e.combo=0,o.value===100){const k=g();s.updateStats({category:e.currentCategory,difficulty:e.difficulty,score:e.score,time:e.timer.seconds,accuracy:y.value,achievements:k})}},resetStats:()=>{d.value=0,e.combo=0,e.score=0,e.totalAttempts=0},checkAchievements:g}}const Le=D({name:"QBanner",props:{...ge,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:s}){const{proxy:{$q:d}}=I(),f=he(e,d),p=r(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(f.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),y=r(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const o=[x("div",{class:"q-banner__avatar col-auto row items-center self-start"},z(s.avatar)),x("div",{class:"q-banner__content col text-body2"},z(s.default))],v=z(s.action);return v!==void 0&&o.push(x("div",{class:y.value},v)),x("div",{class:p.value+(e.inlineActions===!1&&v!==void 0?" q-banner--top-padding":""),role:"alert"},o)}}}),Ue={class:"text-subtitle1 q-mt-sm"},Re={class:"row q-col-gutter-md"},Ee={class:"col-6"},De={class:"text-h5 q-mt-sm"},Ie={class:"text-caption"},Oe={class:"col-6"},je={class:"text-h5 q-mt-sm"},Xe={class:"col-6"},Je={class:"text-h5 q-mt-sm"},Ke={class:"col-6"},Ye={class:"text-h5 q-mt-sm"},Ze={key:0,class:"high-score-section q-mt-md"},et={key:1,class:"missed-words q-mt-md"},tt={class:"row q-col-gutter-sm q-mt-sm"},ot={__name:"EndGameModal",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue","restart"],setup(e,{emit:s}){const d=e,f=s,p=Ve(),y=pe(),o=O(),v=Z(),_=N(null),C=N(!1),g=r({get:()=>d.modelValue,set:b=>f("update:modelValue",b)}),a=r(()=>o.foundWordsCount===o.totalWords),l=r(()=>a.value?"text-positive":"text-warning"),{formattedTime:t}=we(r(()=>o.timer.seconds)),i=r(()=>o.score.toLocaleString()),m=r(()=>o.foundWordsCount),k=r(()=>o.totalWords),P=r(()=>o.totalAttempts===0?100:Math.round(o.foundWordsCount/o.totalAttempts*100)),j=r(()=>o.words.filter(b=>!o.foundWords.has(b))),ae=r(()=>{const b=o.score,h=v.getHighScore(o.currentCategory,o.difficulty);return b>(h||0)}),se=r(()=>v.getHighScore(o.currentCategory,o.difficulty)||0),ne=b=>b.toLocaleString(),re=()=>{g.value=!1,f("restart")},le=()=>{g.value=!1;const b=H();b.isGameActive=!1,o.cleanup(),y.push({name:"start"})},ie=()=>{const h=`${a.value?"🎉":"⏰"} Word Search - ${o.difficulty}
📝 Found ${m.value}/${k.value} words
⭐ Score: ${i.value}
⏱️ Time: ${t.value}
🎯 Accuracy: ${P.value}%`;navigator.share?navigator.share({title:"Word Search Result",text:h}).catch(()=>{X(h)}):X(h)},X=b=>{navigator.clipboard.writeText(b).then(()=>{p.notify({message:"Result copied to clipboard!",color:"positive",icon:"content_copy"})})},ce=()=>{if(!_.value||!a.value)return;C.value=!0,K.create(_.value,{resize:!0,useWorker:!0})({particleCount:100,spread:70,origin:{y:.6}})};return L(g,b=>{b&&a.value&&R(()=>{ce()})}),ye(()=>{_.value&&K.reset()}),(b,h)=>($(),U(Y,{modelValue:g.value,"onUpdate:modelValue":h[0]||(h[0]=V=>g.value=V),"transition-show":"scale","transition-hide":"scale","data-test":"end-game-modal"},{default:u(()=>[n(B,{class:"end-game-modal"},{default:u(()=>[a.value&&C.value?($(),M("div",{key:0,ref_key:"confettiContainer",ref:_,class:"confetti-container"},null,512)):A("",!0),n(W,{class:"text-center q-pb-none"},{default:u(()=>[c("div",{class:_e(["text-h4 text-weight-bold",l.value])},S(a.value?"Victory!":"Time's Up!"),3),c("div",Ue,S(a.value?"Congratulations!":"Better luck next time!"),1)]),_:1}),n(W,null,{default:u(()=>[c("div",Re,[c("div",Ee,[n(B,{flat:"",bordered:""},{default:u(()=>[n(W,{class:"text-center"},{default:u(()=>[n(G,{name:"timer",size:"2rem",color:"primary"}),c("div",De,S(T(t)),1),c("div",Ie,"Time "+S(a.value?"Taken":"Elapsed"),1)]),_:1})]),_:1})]),c("div",Oe,[n(B,{flat:"",bordered:""},{default:u(()=>[n(W,{class:"text-center"},{default:u(()=>[n(G,{name:"stars",size:"2rem",color:"warning"}),c("div",je,S(i.value),1),h[1]||(h[1]=c("div",{class:"text-caption"},"Final Score",-1))]),_:1,__:[1]})]),_:1})]),c("div",Xe,[n(B,{flat:"",bordered:""},{default:u(()=>[n(W,{class:"text-center"},{default:u(()=>[n(G,{name:"search",size:"2rem",color:"info"}),c("div",Je,S(m.value)+"/"+S(k.value),1),h[2]||(h[2]=c("div",{class:"text-caption"},"Words Found",-1))]),_:1,__:[2]})]),_:1})]),c("div",Ke,[n(B,{flat:"",bordered:""},{default:u(()=>[n(W,{class:"text-center"},{default:u(()=>[n(G,{name:"gps_fixed",size:"2rem",color:"positive"}),c("div",Ye,S(P.value)+"%",1),h[3]||(h[3]=c("div",{class:"text-caption"},"Accuracy",-1))]),_:1,__:[3]})]),_:1})])]),a.value?($(),M("div",Ze,[ae.value?($(),U(Le,{key:0,rounded:"",class:"bg-positive text-white"},{avatar:u(()=>[n(G,{name:"emoji_events"})]),default:u(()=>[q(" New High Score! Previous best: "+S(ne(se.value)),1)]),_:1})):A("",!0)])):A("",!0),!a.value&&j.value.length>0?($(),M("div",et,[h[4]||(h[4]=c("div",{class:"text-subtitle2"},"Missed Words:",-1)),c("div",tt,[($(!0),M(be,null,Se(j.value,V=>($(),M("div",{key:V,class:"col-auto"},[n(We,{outline:"",color:"grey",size:"sm"},{default:u(()=>[q(S(V),1)]),_:2},1024)]))),128))])])):A("",!0)]),_:1}),n(xe,{align:"center",class:"q-pa-md"},{default:u(()=>[n(w,{color:"primary",label:"Play Again",icon:"replay",onClick:re}),n(w,{outline:"",color:"primary",label:"Back to Menu",icon:"home",class:"q-ml-sm",onClick:le}),n(w,{flat:"",color:"grey",icon:"share",class:"q-ml-sm",onClick:ie},{default:u(()=>[n(Q,null,{default:u(()=>h[5]||(h[5]=[q("Share Result")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},at=ee(ot,[["__scopeId","data-v-b3c513b4"]]),st={class:"game-hud top-hud"},nt={class:"hud-left"},rt={class:"score-display"},lt={class:"score-value"},it={class:"hud-center"},ct={class:"progress-container"},ut={class:"progress-text"},dt={class:"hud-right"},mt={class:"game-board-container"},ft={class:"game-hud bottom-hud"},vt={class:"words-container"},gt={__name:"GamePage",setup(e){const s=O(),d=J(!1),f=J(!1),{progress:p,formattedScore:y}=Fe(),o=r(()=>s.hintsEnabled&&!s.gameComplete);L(()=>H().gameComplete,a=>{console.log("GamePage: Game completion changed:",{complete:a,isChallengeMode:s.isChallengeMode,showEndGame:f.value,foundWords:s.foundWordsCount,totalWords:s.totalWords}),a&&!s.isChallengeMode&&(console.log("GamePage: Showing end game modal"),f.value=!0)},{flush:"post"}),L(()=>H().isGameComplete,a=>{console.log("GamePage: isGameComplete changed:",{complete:a,isChallengeMode:s.isChallengeMode,showEndGame:f.value,foundWords:s.foundWordsCount,totalWords:s.totalWords}),a&&!s.isChallengeMode&&!f.value&&(console.log("GamePage: Showing end game modal (backup watch)"),f.value=!0)},{flush:"post"});const v=N(!1),_=async()=>{if(v.value)return;v.value=!0,await R();const a=H();a.currentCategory||(a.currentCategory="animals"),a.difficulty||(a.difficulty="medium"),console.log("GamePage: Starting single-player game:",{isChallengeMode:s.isChallengeMode,challengeModeActive:s.challengeMode.isActive,challengeModeState:s.challengeMode}),s.isChallengeMode&&(console.log("GamePage: Challenge mode was active, exiting it for single-player game"),s.exitChallengeMode()),await R(),s.startNewGame(),v.value=!1},C=async()=>{f.value=!1,await _()};Ce(()=>{_()}),ke(()=>{s.cleanup()});const g=()=>{s.useHint()};return(a,l)=>($(),U(Pe,{class:"game-page"},{default:u(()=>[c("div",st,[c("div",nt,[n(w,{flat:"",round:"",icon:"arrow_back",to:{name:"start"},class:"back-btn",size:"md"},{default:u(()=>[n(Q,null,{default:u(()=>l[5]||(l[5]=[q("Back to Menu")])),_:1,__:[5]})]),_:1}),c("div",rt,[c("div",lt,S(T(y)),1),l[6]||(l[6]=c("div",{class:"score-label"},"Score",-1))])]),c("div",it,[c("div",ct,[n(ze,{value:T(p),max:100,size:"50px",thickness:.15,color:"secondary","track-color":"rgba(255,255,255,0.1)",class:"progress-ring"},{default:u(()=>[c("div",ut,S(Math.round(T(p)))+"%",1)]),_:1},8,["value"])]),n(qe,{class:"timer-display"})]),c("div",dt,[n(w,{flat:"",round:"",icon:"lightbulb",onClick:g,disable:!o.value,class:"hint-btn",size:"md"},{default:u(()=>[n(Q,null,{default:u(()=>l[7]||(l[7]=[q("Use Hint")])),_:1,__:[7]})]),_:1},8,["disable"]),n(w,{flat:"",round:"",icon:"settings",onClick:l[0]||(l[0]=t=>d.value=!0),class:"settings-btn",size:"md"},{default:u(()=>[n(Q,null,{default:u(()=>l[8]||(l[8]=[q("Settings")])),_:1,__:[8]})]),_:1})])]),c("div",mt,[n(Be,{class:"game-board"})]),c("div",ft,[c("div",vt,[n(Me,{class:"word-list-compact"})])]),n(Ne,{position:"bottom-right",offset:[18,18],class:"mobile-only"},{default:u(()=>[n(w,{fab:"",icon:"lightbulb",color:"secondary",onClick:g,disable:!o.value,class:"mobile-hint-btn"},null,8,["disable"])]),_:1}),n(Y,{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=t=>d.value=t),class:"settings-dialog"},{default:u(()=>[n(Ge,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=t=>d.value=t),onClose:l[2]||(l[2]=t=>d.value=!1)},null,8,["modelValue"])]),_:1},8,["modelValue"]),n(at,{modelValue:f.value,"onUpdate:modelValue":l[4]||(l[4]=t=>f.value=t),onRestart:C},null,8,["modelValue"])]),_:1}))}},Ct=ee(gt,[["__scopeId","data-v-91b6c7ed"]]);export{Ct as default};
